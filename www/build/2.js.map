{"version":3,"sources":["../../src/pages/fechar-pedido/fechar-pedido.module.ts","../../src/pages/fechar-pedido/fechar-pedido.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { FecharPedidoPage } from './fechar-pedido';\n\n@NgModule({\n  declarations: [\n    FecharPedidoPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(FecharPedidoPage),\n  ],\n})\nexport class FecharPedidoPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/fechar-pedido/fechar-pedido.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, ModalController } from 'ionic-angular';\nimport { AbbasPage } from '../abbas/abbas';\nimport { ServicosProvider } from '../../providers/servicos/servicos';\nimport { AngularFireDatabase } from '../../../node_modules/angularfire2/database';\n\n@IonicPage()\n@Component({\n  selector: 'page-fechar-pedido',\n  templateUrl: 'fechar-pedido.html',\n})\nexport class FecharPedidoPage {\n\n  final: any;\n  mostrarQtdeCarrinho: string;\n  totalPagar: any;\n  valorFrete = \"7,00\";\n  totalCompra: any;\n  numeroFinal: any;\n  \n  constructor(public navCtrl: NavController, public navParams: NavParams, public serv: ServicosProvider, public modalCtrl: ModalController, public alertCtrl: AlertController, public database: AngularFireDatabase) {\n    this.final = this.serv.usuarioLogado;\n  }\n\n  ionViewWillEnter() {\n    this.totalPagar = this.serv.calcularTotal(this.valorFrete, this.serv.totalPagar,'+');\n    this.totalCompra = this.serv.totalPagar;\n    this.mostrarQtdeCarrinho = (this.serv.qtdeCarrinho > 1) ? this.serv.qtdeCarrinho + \" produtos\" : this.serv.qtdeCarrinho + \" produto\";\n    this.numeroFinal = this.final.cartaoCredito.numero.slice(-4);\n  }\n\n  ionViewDidEnter(){\n    if(this.serv.usuarioLogado.entregaEscolhida.dataEntrega == \"\"){\n      this.modalCtrl.create('EscolherEntregaPage').present();\n    }\n  }\n\n  voltar(){\n\n  }\n\n  alterarEndereco(){\n    this.modalCtrl.create('CadastroEnderecoPage', { endereco: this.final.enderecoEntrega }).present();\n  }\n\n  alterarCartao(){\n    this.modalCtrl.create('CartaoCreditoPage', { cartao: this.final.cartaoCredito }).present();\n  }\n\n  alterarDataEntrega(){\n    this.modalCtrl.create('EscolherEntregaPage', { entrega: this.final.entregaEscolhida }).present();\n  }\n\n  finalizarCompra(){\n\n    this.database.list('pedidos')\n      .push({ \n        cliente: this.final,\n        status: \"Enviado\",\n        dataPedido: new Date().toLocaleDateString(),\n        items: this.serv.carrinho,\n        totalPagar: this.serv.totalPagar\n      }).then(() => {\n        this.presentAlert();\n      });      \n  }\n\n  presentAlert() {\n    let alert = this.alertCtrl.create({\n      title: 'Compra finalizada!',\n      subTitle: 'Acompanhe o status em Pedidos.',\n      buttons: [\n        {\n          text: 'OK',\n          handler: () => {\n            this.serv.qtdeCarrinho = 0;\n            this.serv.carrinho = [];\n            this.navCtrl.setRoot(AbbasPage);\n            this.serv.finalizouCompra = true;\n            this.serv.usuarioLogado.entregaEscolhida.dataEntrega = \"\";\n            this.serv.usuarioLogado.entregaEscolhida.periodoEntrega = \"\";\n          }\n        }\n      ]\n    });\n    alert.present();\n  }  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/fechar-pedido/fechar-pedido.ts"],"sourceRoot":""}